<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>è€ä»˜å®¶ä¸“å±è´ªåƒè›‡ | Laofujia.com</title>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background: #2c3e50; color: white; font-family: sans-serif; flex-direction: column; }
        canvas { border: 5px solid #ecf0f1; background: #000; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .info { text-align: center; margin-bottom: 10px; }
        .back-btn { margin-top: 20px; text-decoration: none; color: #3498db; font-weight: bold; }
    </style>
</head>
<body>
    <div class="info">
        <h1>ğŸ® è€ä»˜å®¶è´ªåƒè›‡</h1>
        <p>åˆ†æ•°: <span id="score">0</span> | ä½¿ç”¨æ–¹å‘é”®å¼€å§‹æ¸¸æˆ</p>
    </div>
    <canvas id="game" width="400" height="400"></canvas>
    <a href="../index.html" class="back-btn">â† è¿”å›é¦–é¡µ</a>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        let score = 0;
        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0, dy = 0;
        let gameStarted = false;

        function draw() {
            let head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            // æ’å¢™æ£€æµ‹
            if (head.x < 0 || head.x > 19 || head.y < 0 || head.y > 19 || snake.some((s, i) => i !== 0 && s.x === head.x && s.y === head.y)) {
                alert("æ¸¸æˆç»“æŸï¼å¾—åˆ†: " + score);
                snake = [{x: 10, y: 10}]; dx = 0; dy = 0; score = 0; gameStarted = false;
                scoreElement.innerText = score;
                return;
            }

            if (gameStarted) {
                snake.unshift(head);
                if(head.x === food.x && head.y === food.y) {
                    score += 10;
                    scoreElement.innerText = score;
                    food = {x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20)};
                } else { snake.pop(); }
            }

            ctx.fillStyle = 'black'; ctx.fillRect(0,0,400,400);
            ctx.fillStyle = '#2ecc71'; snake.forEach(s=>ctx.fillRect(s.x*20,s.y*20,18,18));
            ctx.fillStyle = '#e74c3c'; ctx.fillRect(food.x*20,food.y*20,18,18);
        }

        document.addEventListener('keydown', e => {
            gameStarted = true;
            const key = e.key.toLowerCase(); // ç»Ÿä¸€è½¬ä¸ºå°å†™ï¼Œå¤„ç†å¤§å†™é”å®šé—®é¢˜

            // å‘ä¸Šï¼šä¸Šç®­å¤´ æˆ– W
            if((key === 'arrowup' || key === 'w') && dy === 0) {
                dx = 0; dy = -1;
            }
            // å‘ä¸‹ï¼šä¸‹ç®­å¤´ æˆ– S
            if((key === 'arrowdown' || key === 's') && dy === 0) {
                dx = 0; dy = 1;
            }
            // å‘å·¦ï¼šå·¦ç®­å¤´ æˆ– A
            if((key === 'arrowleft' || key === 'a') && dx === 0) {
                dx = -1; dy = 0;
            }
            // å‘å³ï¼šå³ç®­å¤´ æˆ– D
            if((key === 'arrowright' || key === 'd') && dx === 0) {
                dx = 1; dy = 0;
            }
        });

        setInterval(draw, 100);
    </script>
</body>
</html>
